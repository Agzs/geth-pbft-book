### æµ‹è¯•äº¤æ˜“

å‡è®¾ä¸€ä¸ªä¸»èŠ‚ç‚¹(signer1)ï¼Œä¸‰ä¸ªå¤‡ä»½èŠ‚ç‚¹ï¼ˆsigner1ã€2ã€3ï¼‰ï¼Œä¸¤ä¸ªæ™®é€šç”¨æˆ·`node1`å’Œ`node2`

åœ¨`signer2`ã€`signer3`ã€`signer4`ç»ˆç«¯éƒ½è¿è¡Œ`admin.addPeer("encode://...signer1_encode...")`

åœ¨`signer3`ã€`signer4`ç»ˆç«¯éƒ½è¿è¡Œ`admin.addPeer("encode://...signer2_encode...")`

åœ¨`signer4`ç»ˆç«¯éƒ½è¿è¡Œ`admin.addPeer("encode://...signer3_encode...")`

åœ¨`node1`å’Œ`node2`ç»ˆç«¯éƒ½è¿è¡Œ`admin.addPeer("encode://...signer3_encode...")`

**é—®é¢˜** : æµ‹è¯•äº¤æ˜“æ—¶é‡åˆ°ä¸€ä¸ªé—®é¢˜ï¼Œå½“äº¤æ˜“äº§ç”Ÿæ—¶ï¼Œåªæœ‰`signer3`èƒ½æ”¶åˆ°`TxMsg`ï¼Œç„¶åŽä¼šå¹¿æ’­ç»™å…¶ä»–`signer`ï¼ˆåŒ…æ‹¬`signer1`ï¼‰ï¼Œä½†æ˜¯`signer1`åªæ˜¯è¯»å–å‡ºæ¶ˆæ¯çš„ç±»åž‹ä¸º`TxMsg`ï¼Œå¹¶æ²¡æœ‰åŽ»å¤„ç†ï¼›åŽŸå› æœªçŸ¥ï¼Œç­‰å¾…ä¸€æ®µæ—¶é—´åŽï¼Œä¾ç„¶æ²¡æœ‰å°†äº¤æ˜“æ”¾åˆ°æ–°åŒºå—ä¸­ã€‚

**ä¸´æ—¶è§£å†³æ–¹æ³•** : åœ¨`node1`ä¸­è¿è¡Œ`admin.addPeer("encode://...signer1_encode...")`ï¼Œäº¤æ˜“è¢«é¡ºåˆ©çš„æ”¾åˆ°æ–°åŒºå—ä¸­ï¼Œå¹¶è¢«æŒ–å‡ºï¼Œä½†æ˜¯æ­¤æ—¶çš„`node1`æ‰®æ¼”äº†ä¸€ä¸ªå¤‡ä»½èŠ‚ç‚¹çš„è§’è‰²ï¼Œè¿™æ˜¯ä¸€ä¸ªbugï¼›å¹¶ä¸”`node1`æ˜¯é€šè¿‡`geth --datadir pbft/node1/data --networkid 55661 --port 2000  console`å¯åŠ¨çš„ï¼Œè™½ç„¶æ²¡æœ‰æŒ‡å®špbftidï¼Œä½†æ˜¯ç¨‹åºé»˜è®¤ç»™åˆ†é…äº†0ï¼Œè¿™ä¹Ÿæ˜¯ä¸€ä¸ªbugã€‚

~**åŽæœŸéœ€è¦å¼„ä¸¤å¥—ç³»ç»Ÿï¼Œä¸€ä¸ªç»™signerç”¨ï¼Œå¦ä¸€ä¸ªç»™æ™®é€šç”¨æˆ·ç”¨ï¼Ÿï¼Ÿï¼Ÿ**~

**æœ€ç»ˆè§£å†³æ–¹æ³•** : ä½¿ç”¨ä¸¤å¥—ç³»ç»Ÿï¼Œä½†æ˜¯ä¸¤å¥—ç³»ç»Ÿä½¿ç”¨åŒä¸€ä¸ª.jsonæ–‡ä»¶åˆå§‹åŒ–åˆ›ä¸–åŒºå—ï¼Œpeeräº’è”æ—¶ä¾æ—§é‡‡ç”¨`addPeer("enode://.....@IP:port")`ï¼Œæ³¨æ„è¿™é‡Œçš„IPä¸å†æ˜¯`127.0.0.1`ï¼Œè€Œæ˜¯ç”µè„‘åˆ†é…çš„ä¸»æœºIPåœ°å€ã€‚
signer1-4ä½äºŽAç”µè„‘ï¼Œnode1-2ä½äºŽBç”µè„‘ã€‚

å‰æœŸçš„å‘ç”Ÿçš„äº¤æ˜“ï¼Œæ˜¯åœ¨node1å’Œsigner1æœªé€šè¿‡addPeer()å»ºç«‹è¿žæŽ¥çš„æƒ…å†µä¸‹ï¼Œæ‰€ä»¥ä¸å½±å“äº¤æ˜“ï¼Œä¹Ÿæ²¡æœ‰æŠ¥é”™ï¼Œä¸‹é¢æ˜¯æµ‹è¯•è¿‡ç¨‹ï¼š

åˆå§‹è®¾ç½®æ—¶ï¼Œç»™node1é¢„è®¾äº†ä½™é¢ï¼Œnode2ä¸­æ²¡æœ‰ä½™é¢ï¼ŒçŽ°åœ¨æµ‹è¯•node1å‘node2è½¬è´¦ï¼Œnode1çš„åœ°å€ä¸º(24ff...),node2åœ°å€ä¸º(079a...)

#### 1ã€æŸ¥çœ‹ä½™é¢
```go
> eth.getBalance("0x24ff90ae9012f1b607a00aedd866403ef16f32ca")
9.04625697166532776746648320380374280103671755200316906558262375061821325312e+74
> eth.getBalance("0x079aafa464a201cf265850d852457812766bf549")
0
```

#### 2ã€è§£é”è´¦æˆ·ï¼Œè¿›è¡Œè½¬è´¦
```go
> personal.unlockAccount("0x24ff90ae9012f1b607a00aedd866403ef16f32ca")
Unlock account 0x24ff90ae9012f1b607a00aedd866403ef16f32ca
Passphrase: 
true
> eth.sendTransaction({from:"0x24ff90ae9012f1b607a00aedd866403ef16f32ca",to:"0x079aafa464a201cf265850d852457812766bf549",value:web3.toWei(0.05, "ether")})
INFO [11-06|20:51:11] Submitted transaction                    fullhash=0x18b2d8aa75502e19fac65c347a296e03d8c06fc21b37d778e318addf9f552195 recipient=0x079aaFA464a201cf265850d852457812766bF549
"0x18b2d8aa75502e19fac65c347a296e03d8c06fc21b37d778e318addf9f552195"

> personal.unlockAccount("0x24ff90ae9012f1b607a00aedd866403ef16f32ca")
Unlock account 0x24ff90ae9012f1b607a00aedd866403ef16f32ca
Passphrase: 
true
> eth.sendTransaction({from:"0x24ff90ae9012f1b607a00aedd866403ef16f32ca",to:"0x079aafa464a201cf265850d852457812766bf549",value:web3.toWei(0.05, "ether")})
INFO [11-06|20:55:31] Submitted transaction                    fullhash=0xf7ae24bc2db635bc06336153e69dfe02f391dd5e7ba81cf994da961a7ff0a4ab recipient=0x079aaFA464a201cf265850d852457812766bF549
"0xf7ae24bc2db635bc06336153e69dfe02f391dd5e7ba81cf994da961a7ff0a4ab"
```
#### 3ã€signer1å¼€å§‹æŒ–çŸ¿
```go
> miner.start()
INFO [11-06|21:02:30] Transaction pool price threshold updated price=18000000000
nullINFO [11-06|21:02:30] Starting mining operation 

> INFO [11-06|21:02:30] Commit new mining work                   number=37 txs=2 uncles=0 elapsed=576.415Âµs
INFO [11-06|21:02:30] Replica received a block                 Replica(PeerID)=0 hash=e9b040â€¦d309c9
2017/11/06 21:02:30 Replica 0 soft starting new view timer for 20s: new block e9b040d84bbce0b557dac37350a70add73742251b34be89991cbbd6f0ed309c9
...
INFO [11-06|21:02:30] ðŸ”¨ mined potential block                  number=37 hash=e9b040â€¦d309c9
```

#### 4ã€node1æ·»åŠ æ–°å—
```go
INFO [11-06|21:02:30] handleMsg() ---NewBlockHashesMsg----------- 
INFO [11-06|21:02:30] Read the next message from the remote peer in pm.handleMsg() 
INFO [11-06|21:02:30] Read the next message from the remote peer in pm.handleMsg() 
INFO [11-06|21:02:30] Imported new chain segment               blocks=1 txs=2 mgas=0.042 elapsed=1.419ms   mgasps=29.584 number=37 hash=e9b040â€¦d309c9
```

#### 5ã€æŸ¥çœ‹è½¬è´¦åŽçš„ä½™é¢
```go
> eth.getBalance("0x079aafa464a201cf265850d852457812766bf549")

100000000000000000
> eth.getBalance("0x24ff90ae9012f1b607a00aedd866403ef16f32ca")

9.04625697166532776746648320380374280103671755200316906558161619061821325312e+74
> 
```

#### 6ã€æŸ¥çœ‹åŒºå—ä¿¡æ¯
```go
> eth.getBlock(37)
{
  difficulty: 2,
  extraData: "0xd783010607846765746887676f312e382e33856c696e75780000000000000000696bf575787e4d536a166e79275d227dac1ab57e001603357b89820d5897566d4bbfbbc75e6bc6ca977fe32b44f276a9e1e695ceaaa1de8773c592a232ea530b00",
  gasLimit: 4712388,
  gasUsed: 42000,
  hash: "0xe9b040d84bbce0b557dac37350a70add73742251b34be89991cbbd6f0ed309c9",
  logsBloom: "0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
  miner: "0x0000000000000000000000000000000000000000",
  mixHash: "0x0000000000000000000000000000000000000000000000000000000000000000",
  nonce: "0x0000000000000000",
  number: 37,
  parentHash: "0x27e02182ec5758f00a1b82838bc7f033dd5606dfbe1cbe0be088d3037db82f2e",
  receiptsRoot: "0xb4f699e317c3dd9cf37792a5d777e5efccff1be9144bb8592bf013cb734fa456",
  sha3Uncles: "0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347",
  size: 833,
  stateRoot: "0x6923f30964b18c99aac1fd275b3a3bfb4ea16392ec6b9dac5b9023aa526bc6a9",
  timestamp: 1509973350,
  totalDifficulty: 48,
  transactions: ["0x18b2d8aa75502e19fac65c347a296e03d8c06fc21b37d778e318addf9f552195", "0xf7ae24bc2db635bc06336153e69dfe02f391dd5e7ba81cf994da961a7ff0a4ab"],
  transactionsRoot: "0xd0906fb99634dd8c8cda807dc00366c382b712bef24d6c1b95472ebfef32ac64",
  uncles: []
}
> 
```

#### 7ã€æŸ¥çœ‹äº¤æ˜“
```go
> eth.accounts
["0x24ff90ae9012f1b607a00aedd866403ef16f32ca"]
> 
> eth.getTransaction("0x18b2d8aa75502e19fac65c347a296e03d8c06fc21b37d778e318addf9f552195WARN [11-06|21:24:58] System clock seems off by -11.557353641s, which can prevent network connectivity 
WARN [11-06|21:24:58] Please enable network time synchronisation in system settings. 
> eth.getTransaction("0x18b2d8aa75502e19fac65c347a296e03d8c06fc21b37d778e318addf9f552195")
{
  blockHash: "0xe9b040d84bbce0b557dac37350a70add73742251b34be89991cbbd6f0ed309c9",
  blockNumber: 37,
  from: "0x24ff90ae9012f1b607a00aedd866403ef16f32ca",
  gas: 90000,
  gasPrice: 18000000000,
  hash: "0x18b2d8aa75502e19fac65c347a296e03d8c06fc21b37d778e318addf9f552195",
  input: "0x",
  nonce: 0,
  r: "0xdf46d90a851bf3f12dc01b95f8c2d93af271f5b9b3bcf746f2b318773501d779",
  s: "0x696e731826b7fe6e32c64d07b6491bdc0990aa13c163daf5705a76dcaf845614",
  to: "0x079aafa464a201cf265850d852457812766bf549",
  transactionIndex: 0,
  v: "0x4d57",
  value: 50000000000000000
}
> 
```